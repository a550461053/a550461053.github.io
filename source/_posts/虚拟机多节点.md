---
title: è™šæ‹Ÿæœºå¤šèŠ‚ç‚¹
date: 2017-12-21 10:39:35
tags: [vmware, ethereum, hyperledger]
---


## vmwareé…ç½®
- å®‰è£…vm12:
	- å®‰è£…vmwaretools
		- ç‚¹å‡»install tools
		- è§£åŽ‹åˆ°æ¡Œé¢
		- è¿›å…¥
		- sudo ./vmware-install.pl -d
		- é‡å¯
		- å¦‚è¦å¸è½½: ./vmware-tools-distrib/bin/vmware-uninstall-tools.pl
	- ä¿®æ”¹ä¸‹è½½æº
	- å…ˆç”¨natæ¨¡å¼è”ç½‘(å¯ä»¥ipv6åœ°å€ä¿®æ”¹ï¼Œæ¡¥æŽ¥åˆ°æœ‰çº¿ç½‘å¡ä¹Ÿå¯ä»¥ï¼Œç›´æŽ¥æ¡¥æŽ¥å°±ä¸éœ€è¦æ”¹ipv6çš„ï¼Œvmwareæ”¯æŒipv6è‡ªåŠ¨èŽ·å–ï¼Œåªéœ€è¦è‡ªè¯¥ipv6-naté€‰é¡¹å³å¯), ä¸‹è½½å®‰è£…å„ç§è½¯ä»¶
		- sudo mkdir -p /home/yuziqi/.../github.com
	- å†ç”¨æ¡¥æŽ¥æ¨¡å¼ä¸Žå®¿ä¸»æœºæž„æˆå±€åŸŸç½‘, è°ƒè¯•
		- æ³¨æ„æ¡¥æŽ¥æ¨¡å¼é€‰æ‹©çš„ç½‘å¡æ˜¯æœ¬åœ°æœ‰çº¿enp4s0f1è¿˜æ˜¯æ— çº¿wlp3s0
	- å®‰è£…wm12:
		+ vmware10 åœ¨linuxä¸‹æœ‰ç‚¹é—®é¢˜
	- gcc>5.0æ”¯æŒä¸‹, æ‰“å¼€å‰: sudo vmware-modconfig --console --install-allï¼Œä¸æ‰§è¡Œç¬¬ä¸€æ¬¡æ‰“å¼€çš„æ—¶å€™ä¹Ÿä¼šè‡ªåŠ¨å®‰è£…
	- æœ‰æ—¶å€™æ˜¯å†…æ ¸é—®é¢˜ï¼šå®‰è£…ç›¸åº”çš„imageså’Œheaders
	- å¸è½½ï¼š
		+ sudo ./VMware-workstation-Full-9.0.0.bundle --uninstall-product vmware-workstation
		+ æˆ–è€…ï¼šsudo vmware-installer -u vmware-workstation
	- å¼€å¯VTï¼š
		+ é‡å¯è¿›å…¥BIOS
		+ è¿›å…¥config-CPUï¼Œæœ‰ä¸¤é¡¹è™šæ‹ŸåŒ–æŠ€æœ¯VTx å’Œ å®šå‘IO(VTd)è™šæ‹ŸåŒ–æŠ€æœ¯ æ”¹ä¸ºenable
		+ F10ä¿å­˜å¹¶é‡å¯
	- è”ç½‘è€ƒè™‘å› ç´ ï¼š
		+ vmwareè½¯ä»¶é…ç½®ï¼š
			* æ˜¯å¦è¿žæŽ¥nat/bridge
			* æ˜¯å¦æ­£ç¡®é€‰æ‹©bridgeçš„å®¿ä¸»æœºç½‘å¡
		+ è™šæ‹Ÿçš„ç³»ç»Ÿæ˜¯å¦é…ç½®æ­£ç¡®
		+ å®¿ä¸»æœºç³»ç»Ÿè€ƒè™‘ï¼š
			* æ˜¯å¦å¼€å¯DHCPã€NATæœåŠ¡ç­‰
	- windowsä¸‹è”ç½‘ï¼š
		+ è®°å¾—å¼€å¯æœåŠ¡ï¼šVMware DHCPå’ŒVMware NATä¸¤ä¸ªæœåŠ¡
			* win+r -> services.msc
			* å¦‚æžœéœ€è¦è¿˜å¾—æ‰“å¼€usbæœåŠ¡ï¼
		+ è®°å¾—æ‰“å¼€vmwareå³ä¸‹æ–¹çš„natæœåŠ¡è¿žæŽ¥ï¼ï¼
		+ è®°å¾—é€‰æ‹©vmwareçš„åŒæ­¥æ—¶é—´é€‰é¡¹
- Ubuntuå‡ºçŽ°å¼•å¯¼é”™è¯¯ï¼Œè¿›å…¥grubï¼š
	+ ç”¨Uç›˜è¿›å…¥è¯•ç”¨æ¨¡å¼
	+ sudo su
	+ sudo add-apt-repository ppa:yannubuntu/boot-repair
	+ apt-get update
	+ apt-get install boot-repair
	+ åœ¨dashä¸­æœç´¢boot-repair
	+ ç‚¹recommand repair
- è™šæ‹Ÿæœºå¤åˆ¶å‡ºçŽ°grubé—®é¢˜ï¼š
	+ å½“ç³»ç»Ÿè£…äº†å¤šä¸ªå†…æ ¸ä¹‹åŽï¼Œå¼€æœºå°±ä¼šè¿›å…¥grubï¼Œéœ€è¦æ‰¾åˆ°å†…æ ¸å¯åŠ¨
	+ æŸ¥çœ‹åˆ†åŒºï¼šls
	+ æŸ¥çœ‹ç³»ç»Ÿæ‰€åœ¨åˆ†åŒºï¼šls (hd0,msdos1)
	+ æ‰¾åˆ°å¯åŠ¨åˆ†åŒºï¼š
		* root=(hd0,msdos1)
		* prefix=/boot/grub
		* set root=(hd0,msdos1)
		* set prefix=(hd0,msdos1)/boot/grub
		* å¯åŠ¨ï¼šinsmod normal
		* normal
		* æ­£å¸¸åº”è¯¥ä¼šè¿›å…¥Ubuntuå‘½ä»¤è¡Œçš„ï¼ŒæŒ‰cï¼Œä½†æˆ‘æ²¡æœ‰è¿›åŽ»
	+ è®¾ç½®å†…æ ¸ï¼š
		* linux /vmlinux-xxx-xxx root=/dev/sda1
		* initrd /initrd.img-xxx-xxx
		* å¯åŠ¨ï¼šboot
	+ è¿›å…¥åˆ°Ubuntuä¿®å¤grubï¼š
		* sudo update-grub
		* sudo grub-install /dev/sda # ä¸è¦æŒ‡å®šsda1
	+ ok
	+ å¦‚æžœgrubéƒ½ä¸è¡Œï¼Œåˆ™å¯ä»¥é€‰æ‹©ä»Žiosè¿›å…¥try Ubuntuä¿®å¤grub
		* sudo fdisk -l
		* æŒ‚è½½æ‰€åœ¨ç³»ç»Ÿç›˜ï¼šsudo mount /dev/sda1 /mnt
		* å¼€å§‹æ¢å¤å¼•å¯¼ç³»ç»Ÿï¼šsudo grub-install --root-directory=/mnt /dev/sda # ä¸è¦æŒ‡å®šsda1
- vmwareå¤šèŠ‚ç‚¹
	+ è®¡åˆ’å¸ƒç½®ï¼š
		+ orderer1.org1.batista.com - 192.168.1.2
		+ peer0.org1.batista.com - 192.168.1.11
		+ peer1.org1.batista.com - 192.168.1.12 
		+ peer0.org2.batista.com - 192.168.1.13
		+ peer1.org2.batista.com - 192.168.1.14
	+ ä¿®æ”¹hostnameï¼š
		* batista@ubuntu: å‰è€…æ˜¯ç”¨æˆ·åï¼ŒUbuntuæ‰æ˜¯ä¸»æœºå
		* ä¸´æ—¶ï¼šhostname vm1 # é‡å¯ä¼šæ¢å¤
		* æ°¸ä¹…ï¼š
			- /etc/hostname 
			- /etc/hosts # ä¿®æ”¹127.0.0.1 localhost  # å°±æ˜¯DNS
				+ 192.168.
			- æ”¹å®Œä¹‹åŽå¾—é‡å¯ç”Ÿæ•ˆï¼Œæ‰€ä»¥ç”¨ä¸€æ¬¡ä¸´æ—¶çš„å³å¯
			- æ”¹ä¸ºorderer1.org1.batista.com,å¯èƒ½æ˜¾ç¤ºæœ‰é—®é¢˜ï¼Œä½†æ˜¯è¿˜æ˜¯ä¿®æ”¹äº†ã€‚
	+ docker0ç½‘æ¡¥ï¼š
		* å…¶ä»–çš„ç½‘æ¡¥ä¸Šçš„ç½‘å¡ï¼Œåœ¨dockerå®¹å™¨ç»“æŸåŽæ­£å¸¸æ˜¯åº”è¯¥ä¼šæ¶ˆå¤±çš„
		* åœæ­¢: ifconfig docker0 down
		* åˆ é™¤ï¼šbrctl delbr docker0
		* æŸ¥çœ‹æ‰€æœ‰ç½‘æ¡¥ï¼šbrctl show
	+ é…ç½®vmwareç½‘æ¡¥ï¼š
		* é€‰æ‹©æ¡¥æŽ¥ï¼Œè‹¥é€‰æ‹©å¤åˆ¶ç‰©ç†è¿žæŽ¥çŠ¶æ€ï¼Œåˆ™åœ¨æœ‰çº¿æ— çº¿è¿›è¡Œåˆ‡æ¢çš„æ—¶å€™ï¼ŒIPåœ°å€ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œé€‚åˆç¬”è®°æœ¬ç”µè„‘ä¸Šè¿è¡Œçš„è™šæ‹Ÿæœºã€‚
		* é«˜çº§é€‰é¡¹é€‰æ‹©ï¼štraffic æµå…¥æµå‡ºçš„å¸¦å®½é™åˆ¶ï¼Œéƒ½ç»™äº†4Mbpsé™åˆ¶
		* ä¼šå ç”¨10.10.28.102çš„å±€åŸŸç½‘ç«¯å£ï¼Œsoæ¢æ–¹æ³•
		* å°†ä¸»æœºè”å…¥è·¯ç”±å™¨çš„å±€åŸŸç½‘ä¸­192.168.1.1
		* å†è¿›è¡Œæ¡¥æŽ¥
		* è”å…¥è·¯ç”±å™¨çš„å±€åŸŸç½‘ï¼Œç”µè„‘ç«¯å¿…é¡»è‡ªåŠ¨èŽ·å–IPï¼Œè¦æƒ³è®¾ç½®é™æ€IPï¼Œåœ¨è·¯ç”±å™¨ç«¯è¿›è¡ŒDHCPæœåŠ¡å™¨é…ç½®ç›¸åº”macæœºå™¨å³å¯ã€‚
	+ vmwareè™šæ‹Ÿæœºå…‹éš†æˆ–å¤åˆ¶ï¼š
		* å¤åˆ¶åŽæ‰“å¼€æœ‰ä¸¤ç§æ–¹å¼ï¼š
			- i copy idï¼šè¿™æ ·ä¼šæ£€æµ‹ç‰©ç†æœºæ”¹å˜åŽï¼Œé‡æ–°ç”Ÿæˆä¸€ä¸ªæ–°çš„ç½‘å¡macåœ°å€
			- i move itï¼šè¿™æ ·çŸ¥é“äº†åªæ˜¯ç§»åŠ¨äº†è¿™ä¸ªè™šæ‹Ÿæœºï¼Œåªæœ‰uuid.locationå‘ç”Ÿå˜åŒ–ï¼Œmacåœ°å€ä¸å˜
		* macå¤åˆ¶æˆ–cloneåŽæ”¹å˜ï¼š
			- ä½†æ˜¯è·¯ç”±å™¨å·²ç»ä¿®æ”¹äº†macç»‘å®šé™æ€DHCP ipï¼Œä¸ºäº†ç®€å•
			- ç›´æŽ¥ä½¿ç”¨Ubuntuçš„clone macåŠŸèƒ½ï¼Œclone macä¸ºä¹‹å‰å·²ç»åœ¨è·¯ç”±å™¨ä¸­è®¾å®šçš„mac
		* å¯ä»¥æ‰‹åŠ¨ä¿®æ”¹ç‰©ç†ç½‘å¡macï¼š
			- æ–¹æ³•ä¸€ï¼šç›´æŽ¥ç¼–è¾‘*.vmxæ–‡ä»¶ï¼Œç±»ä¼¼äºŽé‡æ–°çƒ§å½•äº†vmwareè™šæ‹Ÿæœºçš„ç‰©ç†ç½‘å¡ROMï¼š
				+ æŸ¥çœ‹åŽï¼Œå‘çŽ°ethernet0.addressType="static" æˆ– "vpx"
				+ è¯´æ˜Žæ˜¯é™æ€è®¾å®šçš„ï¼Œä¿®æ”¹ä¸ºä»¥00:50:56å¼€å¤´çš„å¦ä¸€ä¸ªmacå³å¯
				+ æ”¹å®ŒåŽé‡å¯vmæ—¶ï¼Œè‹¥é—®ä½ SSIDçš„è¯ï¼Œé€‰æ‹©"keepalways"
			- æ–¹æ³•äºŒï¼šå‘çŽ°æ˜¯ethernet0.addressType="generated"
				+ è¯´æ˜Žvmçš„ç‰©ç†ç½‘å¡çš„macæ˜¯éšç³»ç»ŸéšæœºåŠ¨æ€æŒ‡å®šçš„ï¼Œå¯ä»¥é€šè¿‡å°†uuid.biosåŽå…­ä½åŠethernet0.generatedAddressåŽå…­ä½æ”¹ä¸ºæƒ³è¦çš„ä»¥00:0c:29
	+ é…ç½®vmware-natæ–¹å¼ï¼š
		* vmnet8
		* gatewayï¼š192.168.93.2, mask:255.255.255.0
		* å¤šèŠ‚ç‚¹ä¹‹é—´ä¸èƒ½äº’ç›¸pingé€š

- vmwareçš„ipè®¾ç½®ï¼š
	+ å¦‚æžœéœ€è¦è™šæ‹Ÿæœºå’Œå®¿ä¸»æœºåŒä¸€ipï¼Œåˆ™ï¼šæ¡¥æŽ¥æ¨¡å¼ï¼Œå¹¶é€‰æ‹©å¤åˆ¶ç‰©ç†ç½‘ç»œè¿žæŽ¥çŠ¶æ€
	+ Bridgeæ¡¥æŽ¥ï¼šâ€œç½‘ç»œæ¡¥æŽ¥â€ä¸­çš„â€œç›´æŽ¥æ¡¥æŽ¥åˆ°ç‰©ç†ç½‘ç»œâ€æ„æ€æ˜¯é‡æ–°åˆ†é…ä¸€ä¸ª IPåœ°å€ã€‚è€Œâ€œå¤åˆ¶ç‰©ç†ç½‘ç»œè¿žæŽ¥çŠ¶æ€â€å°±æ˜¯è™šæ‹Ÿæœºå’Œæœ¬åœ°ç”µè„‘é€šç”¨ä¸€å—ç½‘å¡ã€‚ ä¹Ÿå°±ä¸å­˜åœ¨é‡æ–°ä¸ºè™šæ‹Ÿæœºä¸Šç½‘åˆ†é…IPåœ°å€ã€‚

- vmwareæ‰©å®¹ï¼Œæ‰©å¤§ç¡¬ç›˜
	+ æ‰©å±•ç¡¬ç›˜ï¼Œæç¤ºæ— æ³•æ‰©å±•ï¼Œéœ€è¦åˆ é™¤å¿«ç…§ï¼šåˆ é™¤æ‰€æœ‰å¿«ç…§
	+ æ‰©å±•ç¡¬ç›˜ï¼ŒåŽdfçœ‹ä¸å‡ºæ¥ï¼Œè™šæ‹Ÿæœºæš‚æ—¶æ²¡æœ‰è¯†åˆ«
	+ åˆ†åŒºï¼š
		* æ­£å¸¸è¿›å…¥ç³»ç»Ÿï¼Œç„¶åŽinit 1ï¼Œè¿›å…¥åˆ°å•ç”¨æˆ·æ¨¡å¼ï¼Œcrtl+alt+f1ï¼Œç™»å½•rootç”¨æˆ·
		* fdisk -l /dev/sda æŸ¥çœ‹ç£ç›˜åˆ†åŒºæƒ…å†µ
		* fdisk /dev/sda è¿›å…¥åˆ°fdiskç£ç›˜ç®¡ç†
		* è¾“å…¥ï¼šn {new partition}
		* è¾“å…¥ï¼šp {primary partition}
		* è¾“å…¥åˆ†åŒºå·ï¼š3 {partition number}è¡¨ç¤ºç¬¬ä¸‰ä¸ª
		* first sectoré€‰æ‹©é»˜è®¤å³å¯
		* last sectorï¼šå¯ä»¥ä½¿ç”¨+30Gæ¥è¡¨ç¤ºï¼Œæˆ–è€…ä»”ç»†è®¡ç®—ï¼šä¸€ä¸ªsector=512å­—èŠ‚=0.5kbï¼Œæ‰€ä»¥50G=1024*1024*2*50-1
		* partprobeæ›´æ–°åˆ†åŒº
		* å…³é—­tty7çš„å›¾å½¢ç•Œé¢å ç”¨ï¼ŒligthdmæœåŠ¡ï¼Œå¯ä»¥åœ¨ç»ˆç«¯è¾“å…¥ï¼š
			- systemctl disable lightdm.service
			- æˆ–ï¼š/etc/init.d/lightdm stop
			- å¼€å¯ï¼š/etc/init.d/lightdm start
	+ æŒ‚è½½ï¼š
		* swapä¸éœ€è¦æŒ‚è½½
		* å°†åˆšåˆ›å»ºçš„æ–°çš„åˆ†åŒº3æŒ‚è½½åˆ°ç›®å½•ä¸Šä¹‹å‰ï¼Œéœ€è¦æ ¼å¼åŒ–
			- mkfs.ext4 /dev/sda2
		* æŒ‚è½½åˆ°ä¸€ä¸ªå‡†å¤‡å¥½çš„ç©ºç›®å½•ä¸Š
			- mkdir /home/batista/disk1 -p
			- mount /dev/sda2 /home/batista/disk1
		* è®¾ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½
			- vim /etc/fstab
			- æ·»åŠ ä¸€è¡Œï¼š/dev/sda2 /home/batista/disk1 ext4 defaults 0 2
		* df -h æŸ¥çœ‹æœ€åŽçš„ç»“æžœ

## å¤šèŠ‚ç‚¹çŽ¯å¢ƒæ­å»º-ethereum

- è™šæ‹Ÿæœºå®‰è£…geth:
	- æ›´æ–°æœ¬æœºè½¯ä»¶: sudo apt update; sudo apt -f install 
	- git: git --version: 2.7.4
	- nodejs: nodejs -v
		- Linuxä¸­nodeæ˜¯å¦ä¸€ä¸ªè½¯ä»¶,éœ€è¦å®‰è£…æ’ä»¶æ¥ä¿®æ”¹nodeå‘½å
		- è‹¥è¦ä½¿ç”¨node -v: sudo apt install nodejs-legacy
	- npm: npm -v
	- go1.7: go version
	- geth: 
		- å¤åˆ¶go-ethereumæ–‡ä»¶å¤¹åˆ°è™šæ‹Ÿæœº
		- cd go-ethereum
		- make geth
		- ./build/bin/geth
	- mist
		- 
	- æµ‹è¯•:
		- è™šæ‹Ÿæœºæ¡¥æŽ¥æ¨¡å¼: ip 10.10.28.102 // ip 124.16.90.2
		- git clone https://github.com/ethereum/go-ethereum
		- cd go-ethereum; make geth
		- gedit init.json
'''
{
  "nonce": "0x0000000000000042",
  "difficulty": "0x400",
  "mixhash": "0x0000000000000000000000000000000000000000000000000000000000000000",
  "coinbase": "0x0000000000000000000000000000000000000000",
  "timestamp": "0x00",
  "parentHash": "0x0000000000000000000000000000000000000000000000000000000000000000",
  "extraData": "0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa",
  "gasLimit": "0x1388",
  "alloc": {
  },
  "config": {
        "chainId": 15,
        "homesteadBlock": 0,
        "eip155Block": 0,
        "eip158Block": 0
    }
}
'''
	- å…ˆåˆ é™¤ä¹‹å‰çš„.app å’Œ .ethash, ç„¶åŽ: ./geth --datadir "~/app/chain" init init.json
	- å¯åŠ¨ç½‘ç»œ: ./geth --rpc --rpccorsdomain "*" --ipcpath "~/app/chain/geth.ipc" --datadir "~/app/chain" --port "30303" --rpcapi "db,eth,net,web3" --networkid 100000 console

	- è™šæ‹Ÿæœº: "enode://3519f8ae9f7492be1b2fa479456f0c156e5e969128d8207a678b1d1a6982eb4130c5f46adb099219d2e0d2435b739b346f4b0f7512993a23998e45d39bd13f9c@192.168.1.101:30303"
	- è™šæ‹Ÿæœº: 124.16.90.2
	- å®¿ä¸»æœº: admin.addPeer("enode://3519f8ae9f7492be1b2fa479456f0c156e5e969128d8207a678b1d1a6982eb4130c5f46adb099219d2e0d2435b739b346f4b0f7512993a23998e45d39bd13f9c@124.16.90.2:30303")

	- è™šæ‹Ÿæœºåˆå§‹åŒ–: ./geth  --datadir "~/app/chain" init init.json
	- è™šæ‹Ÿæœºä»¥å¤ªåŠå¯åŠ¨:
	- ./geth --rpc --rpcport 8545 --rpccorsdomain "*" --rpcapi "db,eth,net,web3" --ipcpath "~/app/chain/geth.ipc" --datadir "~/app/chain" --port "30303" --networkid 100000 console
	- networkid 100001æ¯ä¸ªnodeçš„idç›¸åŒ
	- æŸ¥çœ‹è™šæ‹Ÿæœºnode URL: admin.nodeInfo.enode
	"enode://8407de28f331c070491f85afd4112a8e71ba150f6b980e599e6cbe1216f899cef554e923a3f148c2feda1db12f0ea1355039775ad9cf9e61ca3a4b20d3ca682e@[::]:30303"
	- å®¿ä¸»æœºä»¥å¤ªåŠå¯åŠ¨: åŒæ ·çš„å‘½ä»¤networkid 100000
	- å®¿ä¸»æœºæ·»åŠ node: admin.addPeer("enode://e8aabbc3aa45dc38492f8c406c311dae3eb6c7771275a9279a158534169d52fd28a64771e60fcc9a9691478ac438fc7fe7dc13eb1a35480a98d8014e6925f3c5@[192.168.1.187]:30303")
		- æŸ¥çœ‹èŠ‚ç‚¹: admin.peers
		- è¿™ç§æ–¹æ³•å¤ªæ…¢, åŒæ­¥è¦å¥½ä¹…
	- å¯¼å‡ºåŒºå—é“¾:
		- å®¿ä¸»æœº: geth export filename
		- è™šæ‹Ÿæœº: geth import filename
	- åŒæ­¥è™šæ‹Ÿæœºæ—¶é—´: 
		- ä¿®æ”¹ä¸ºä¸Šæµ·æ—¶åŒº
	 	- apt-get install ntp
		- /etc/init.d/ntp start


## ä»»åŠ¡
æ™ºèƒ½åˆçº¦æ˜¯å¦‚ä½•åœ¨ä¸¤ä¸ªèŠ‚ç‚¹å­˜çš„
æ•°æ®æ˜¯å¦‚ä½•å­˜çš„
ä¸¤ä¸ªèŠ‚ç‚¹å¦‚ä½•åä½œ

å®¿ä¸»æœºA: æ·»åŠ ä¸¤ä¸ªç”¨æˆ·, æˆ·0ç»™ç”¨æˆ·1è½¬è´¦:
	- ç”¨æˆ·0å…ˆæŒ–çŸ¿, èµšè¶³å¤Ÿæ”¯ä»˜çš„é’±: miner.start()
	- eth.sendTransaction({from:eth.accounts[0], to:eth.accounts[1], value:web3.toWei(0.001, "ether"), gas:30000})
	- gas:
		- 0.001 éœ€è¦ 21000gas
		- 0.006 éœ€è¦ 121000gas
		- æ¯million çš„gas , 0.05ether
		- gasè¦å¤§äºŽé»˜è®¤çš„äº¤æ˜“gas: 21000
		- init.jsä¸­çš„gaslimité»˜è®¤æ˜¯0x1388(5000), æ”¹ä¸º0xC350(50000), æˆ–è€…0xffffffff
		- truffleå·¥ç¨‹çš„truffle.jsçš„networkçš„gas:500000,æ”¹å¤§ç‚¹

è™šæ‹Ÿæœº: miner.start()
å®¿ä¸»æœº: æ£€æŸ¥ä½™é¢: eth.getBalance(eth.accounts[1]), äº¤æ˜“æˆåŠŸ

- å•æœºè¿è¡Œæµ‹è¯•:
	- 

å‚è§ï¼šhttps://sanwen8.cn/p/3dcX1wi.html


## å¤šèŠ‚ç‚¹å®žéªŒ-ethereum

AèŠ‚ç‚¹: miner: "0x2e7ac7512a1c95b395141a6181623bbf36f0b8a5"
BèŠ‚ç‚¹:
CèŠ‚ç‚¹: 
Aè¿žæŽ¥B, Bè¿žæŽ¥C

AèŠ‚ç‚¹ miner.start():
	epoch0 generating DAG in progress: 2m41.549s
	generated ethash verification cache: 32.762s
	epoch1 generating DAG  in progress: 17m14.1

INFO [08-18|14:16:44] Commit new mining work                   number=243 txs=0 uncles=0 elapsed=180.33Âµs
INFO [08-18|14:16:44] Successfully sealed new block            number=243 hash=fc683aâ€¦10a59c
INFO [08-18|14:16:44] ðŸ”— block reached canonical chain          number=238 hash=b6e0d5â€¦f3e8e5
INFO [08-18|14:16:44] ðŸ”¨ mined potential block                  number=243 hash=fc683aâ€¦10a59c

AèŠ‚ç‚¹ eth.sendTransaction({from:eth.accounts[0], to:eth.accounts[1], value:web3.toWei(5, 'ether')}):
	INFO [08-18|14:22:58] Submitted transaction                    fullhash=0x62630d496193253e55af0ea47c0e5d4d787f7b232e0997a8a10fb9e548deb54f recipient=0x48ca728ecccafd114ec769860373fc47671778cf
	"0x62630d496193253e55af0ea47c0e5d4d787f7b232e0997a8a10fb9e548deb54f"
	
miner.start(2);admin.sleepBlocks(1);miner.stop();	

é€šè¿‡ç»ˆç«¯è°ƒç”¨æ™ºèƒ½åˆçº¦:
abi=[{"constant":true,"inputs":[],"name":"get","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"set","outputs":[],"payable":false,"type":"function"}]
address="0x91ee6082c09c72d7de14682b027f6fcdeb162c6b"
g=eth.contract(abi).at(address)
g.get()
g.set({from:eth.accounts[0]})
æ³¨æ„: å½“è°ƒç”¨set()çš„æ—¶å€™, ä»»ä½•ä¿®æ”¹åˆçº¦çŠ¶æ€çš„æ“ä½œéƒ½éœ€è¦ç”¨æˆ·æ¥ç­¾åäº¤æ˜“


- æµ‹è¯•shhå‘é€message
	+ è§: https://github.com/ethereum/go-ethereum/wiki/Whisper-Usage
./geth --shh  --rpc --rpccorsdomain "*" --ipcpath "~/app/chain/geth.ipc" --datadir "~/app/chain" --port "30303" --rpcapi "db,eth,net,web3,shh" --networkid 100000 console
shh.version
shh.info()
shh.setMaxMessageLength(999999) // è®¾ç½®æœ€å¤§æ¶ˆæ¯é•¿åº¦
shh.setMinimumPoW(2.12) //è®¾ç½®æœ€å°æ‰€éœ€è¦çš„PoW
shh.allowP2PMessagesFromPeer("enode://d25474361659861e9e651bc728a17e807a3359ca0d344afd544ed0f11a31faecaf4d74b55db53c6670fd624f08d5c79adfc8da5dd4a11b9213db49a3b750845e@52.178.209.125:30379") // å…è®¸å‘é€åŽ†å²æ¶ˆæ¯
shh.hasKeyPair("5e57b9ffc2387e18636e0a3d0c56b023264c16e78a2adcba1303cefc685e610f") // æ˜¯å¦æœ‰è¯¥PKçš„ç§é’¥
shh.deleteKeyPair("5e57b9ffc2387e18636e0a3d0c56b023264c16e78a2adcba1303cefc685e610f") // åˆ é™¤key
var key = shh.newKeyPair() // åˆ›å»ºä¸€ä¸ªåŠ å¯†æ ‡è¯†IDå·, ç”¨æ¥åŠ å¯†message, 
shh.getPublickey(key) // è¿”å›žå€¼æ˜¯IDçš„PK
shh.getPrivateKey(key) // è¿”å›žå€¼æ˜¯IDçš„ç§é’¥
shh.generateSymmetricKey() // äº§ç”Ÿä¸€ä¸ªéšæœºçš„å¯¹ç§°key
shh.addSymmetricKeyDirect(private_key) // ä¿å­˜ç§é’¥, è¿”å›žID
shh.addSymmetricKeyFromPassword("test") 
shh.getSymmetricKey(key_ID) // è¾“å…¥keyçš„ID, è¿”å›žå¯¹ç§°key
shh.hasSymmetricKey() // 
shh.deleteSymmetricKey("f6dcf21ed6a17bd78d8c4c63195ab997b3b65ea683705501eae82d32667adc92")

shh.getNewSubscriptionMessages("02c1f5c953804acee3b68eda6c0afe3f1b4e0bec73c7445e10d45da333616412")
shh.getFloatingMessages("02c1f5c953804acee3b68eda6c0afe3f1b4e0bec73c7445e10d45da333616412")
shh.subscribe({type: 'asym', pow: 12.3, topics: ['0x5a4ea131', '0x11223344'], key: 'b874f3bbaf031214a567485b703a025cec27d26b2c4457d6b139e56ad8734cea', sig: '0x048229fb947363cf13bb9f9532e124f08840cd6287ecae6b537cda2947ec2b23dbdc3a07bdf7cd2bfb288c25c4d0d0461d91c719da736a22b7bebbcf912298d1e6'})
shh.unsubscribe("02c1f5c953804acee3b68eda6c0afe3f1b4e0bec73c7445e10d45da333616412")
shh.post({type: 'asym', ttl: 7, topic: '0x07678231', powTarget: 2.01, powTime: 2, payload: '0x68656c6c6f', key: '0x048229fb947363cf13bb9f9532e124f08840cd6287ecae6b537cda2947ec2b23dbdc3a07bdf7cd2bfb288c25c4d0d0461d91c719da736a22b7bebbcf912298d1e6'})
subscribe: æ ¼å¼:
	type       string
	key        string
	sig        string
	minPoW     float64
	topics     [][]byte
	allowP2P   bool
å…¶ä¸­: typeåªèƒ½æ˜¯symæˆ–è€…asym
Post: æ ¼å¼:
	type       string
	ttl        uint32
	sig        string
	key        string
	topic      [4]byte
	padding    []byte
	payload    []byte
	powTime    uint32
	powTarget  float64
	targetPeer string

- test the Whisper node on private network

geth --shh --testnet --nodiscover console
åˆ©ç”¨å·²æœ‰æµ‹è¯•èŠ‚ç‚¹: enode://d25474361659861e9e651bc728a17e807a3359ca0d344afd544ed0f11a31faecaf4d74b55db53c6670fd624f08d5c79adfc8da5dd4a11b9213db49a3b750845e@52.178.209.125:30379
admin.addPeer("enode://d25474361659861e9e651bc728a17e807a3359ca0d344afd544ed0f11a31faecaf4d74b55db53c6670fd624f08d5c79adfc8da5dd4a11b9213db49a3b750845e@52.178.209.125:30379")


use cases: geth 1.6.1ä¹‹åŽ Whisper v2å‡çº§ä¸º v5ç‰ˆæœ¬, shh.newIdentity()å‡½æ•°è¢«æ›¿æ¢ä¸ºsubscribe

1. æŽ¥æ”¶éžå¯¹ç§°åŠ å¯†ä¿¡æ¯: 
id = shh.newKeyPair()
pk = shh.getPublicKey(id) // å–å‡ºPK
f = shh.subscribe({type: 'asym', key: id}) //åˆ›å»ºæ¶ˆæ¯, è¿”å›žæ¶ˆæ¯çš„ID
å¹¿æ’­PK: 
è½®å¯»æ¶ˆæ¯: shh.getNewSubscriptionMessages(f)
å‘é€éžå¯¹ç§°åŠ å¯†: shh.post({type: 'asym', ttl: 7, powTarget: 2.5 powTime: 2, payload: '0x7777777777777777', key: pk})

2. æŽ¥æ”¶å¯¹ç§°åŠ å¯†ä¿¡æ¯: å…±äº«ç›¸åŒçš„å¯¹ç§°key
id = shh.addSymmetricKeyFromPassword('test') // æ›´æ–°ä¸º:id = shh.generateSymKeyFromPassword('test')
f = shh.subscribe({type: 'sym', topics: ['0x07678231'], key: id})
æŽ¥æ”¶: shh.getNewSubscriptionMessages(f)
å‘é€: shh.post({type: 'sym', ttl: 7, topic: '0x07678231', powTarget: 2.01, powTime: 2, payload: '0x68656c6c6f', key: id})
ç­¾å: s = shh.newKeyPair()
shh.post({sig: s, type: 'sym', ttl: 7, topic: '0x07678231', powTarget: 2.01, powTime: 2, payload: '0x68656c6c6f', key: id})

3. ä¸€æ¬¡æ€§ä¼šè¯èŠå¤©
id_key = shh.newSymKey() //äº§ç”Ÿå¯¹ç§°ç§˜é’¥
key = shh.getSymKey(id_key) //å–å›žå¯¹ç§°ç§˜é’¥
id = shh.addSymKey(key) // ç›®æ ‡peerå®‰è£…ç§˜é’¥
f = shh.newMessageFilter({type:topics:['0x07678231'], symKeyID: id}) // æ‰€æœ‰å‚ä¸ŽèŠ‚ç‚¹éƒ½è¦subscribeè¿™æ¡æ¶ˆæ¯, 
shh.getFilterMessages(f) //æ­£å¸¸è½®è®­ä¿å­˜çš„subscribeçš„ID



## mist æµ‹è¯•ä½¿ç”¨

å®˜ç½‘é’±åŒ…dapp: https://wallet.ethereum.org/
Dapp:
Mistæ˜¯ä¸€ä¸ªåŽ»ä¸­å¿ƒåŒ–åº”ç”¨æµè§ˆå™¨ã€‚Mozillaç«ç‹æˆ–è€…è°·æ­ŒChromeé€‚ç”¨äºŽweb 2.0ï¼Œè€ŒMistæµè§ˆå™¨é€‚ç”¨äºŽweb 3.0è€Œç”Ÿï¼ˆ3.0æ—¶ä»£å°†ä¼šæ˜¯åŽ»ä¸­å¿ƒåŒ–çš„ï¼‰ã€‚
ä½ å¯ä»¥ç”¨ç”¨Mistæµè§ˆå™¨æ‰“å¼€ä»»ä½•EthereumåŽ»ä¸­å¿ƒåŒ–åº”ç”¨ã€‚Ethereum Wallet DAppåªæ˜¯ä¸€ä¸ªä»¥å¤ªåŠé’±åŒ…åº”ç”¨
ä»¥å¤ªåŠå®¢æˆ·ç«¯é»˜è®¤å¯åŠ¨è¿žæŽ¥çš„èŠ‚ç‚¹æ•°ä½11-13ä¸ªï¼Œå¦‚æžœè§‰å¾—ä¸å¤Ÿï¼Œå¯ä»¥ä½¿ç”¨åœ¨å¯åŠ¨æ—¶å¢žåŠ å¯åŠ¨å‚æ•° â€“maxpeers 100å‘½ä»¤ï¼Œè®©è¿žæŽ¥å¯åŠ¨èŠ‚ç‚¹æ•°å¢žåŠ åˆ°100ä¸Šé™ï¼Œå½“ç„¶ï¼Œä¹Ÿä¼šå¤§é‡æ¶ˆè€—ä½ çš„ç¡¬ç›˜å’ŒCPUã€‚

æµ‹è¯•ï¼šå®¿ä¸»æœºèŠ‚ç‚¹è¿è¡Œdapp, å…¶ä»–èŠ‚ç‚¹æˆ–è€…ä»»æ„çš„æµè§ˆå™¨éƒ½å¯ä»¥è¿è¡Œdappï¼š
	ä½†æ˜¯æˆ‘æµ‹è¯•çš„æ˜¯è™šæ‹ŸæœºèŠ‚ç‚¹ï¼Œè™šæ‹ŸæœºèŠ‚ç‚¹æœ¬èº«æœ‰gethå®¢æˆ·ç«¯ï¼Œ
	ä¸è¿‡å¥½åƒå½“æ—¶æ²¡æœ‰å¯åŠ¨gethï¼Œè¿˜æ˜¯èƒ½è¿è¡Œdappã€‚
	ä½†æˆ‘å¥½åƒåªæ˜¯åˆ©ç”¨äº†æ‰“å¼€ç½‘é¡µçš„åŠŸèƒ½ï¼Œå¹¶æ²¡æœ‰æµ‹è¯•æ˜¯å¦èƒ½å¤Ÿå‘èµ·ä¸€ç¬”äº¤æ˜“ï¼Œ
	ä¸è¿‡ä¹Ÿåº”è¯¥èƒ½å¤Ÿé€šè¿‡å®¿ä¸»æœºèŠ‚ç‚¹å‘èµ·äº¤æ˜“ã€‚
	ä¹Ÿå°±æ˜¯è¯´èƒ½å¤Ÿé€šè¿‡web2çš„æµè§ˆå™¨æ‰“å¼€dappï¼Œè€Œä¸æ˜¯å¿…é¡»å¾—éœ€è¦web3æ”¯æŒçš„mistæµè§ˆå™¨ã€‚
	é‚£ä¹ˆè¿™æ ·çš„è¯ï¼Œå¼€å‘äººå‘˜å°±éœ€è¦æŠŠè¿™ä¸ªdappé€šè¿‡åº”ç”¨å¸‚åœºå–ç»™ç”¨æˆ·ï¼Œç”¨æˆ·å†æ¥ä½¿ç”¨dappé‚£å°±æ˜¯åœ¨æœ¬åœ°è¿è¡Œè‡ªå·±çš„èŠ‚ç‚¹ã€‚


## p2pæµè§ˆå™¨æ–‡ä»¶å…±äº«
git clone https://github.com/Peer5/ShareFest.git
cd ShareFest
ä¿®æ”¹package.jsonæŠŠexpressæ”¹ä¸º>=3.0 <4.0
npm install --dedupe 
npm start 
æ‰“å¼€ç½‘é¡µ: localhost:13337


## æµ‹è¯•å¤šèŠ‚ç‚¹
å¦‚æžœä¸€ä¸ªä¸»æœºå¼€å¤šä¸ªVMè™šæ‹Ÿæœºï¼Œéœ€è¦ï¼š
	CPUï¼šå•æ ¸æ€§èƒ½å¼ºåŠ²ï¼›å¤šæ ¸å¿ƒ
	å†…å­˜ï¼šè¶³å¤Ÿç”¨
	ç¡¬ç›˜ï¼šä¸€ä¸ªç¡¬ç›˜é¡¶å¤š4ä¸ªè™šæ‹Ÿæœºï¼Œæ˜¯æœ€å¤§çš„ç“¶é¢ˆï¼Œæœºæ¢°ç¡¬ç›˜çš„4Kéšæœºè¯»å†™ç“¶é¢ˆå¾ˆå¤§ï¼Œminerå¼€å¯åŽï¼Œç¡¬ç›˜å¤„äºŽ100%è¯»å†™å ç”¨ï¼Œæ— æ³•æµç•…è¿è¡Œä¸»æœºçš„ç‰©ç†æœºï¼›æ¢å›ºæ€
	æ˜¾å¡ï¼šæ²¡æœ‰å½±å“ï¼ŒVMæ˜¾å¡éƒ½æ˜¯é CPUæ¨¡æ‹Ÿå‡ºæ¥çš„
1. é…ç½®: 
	- sublime å®‰è£…:ethereum-solidityåŒ…
	- remix: æä¾›åœ¨çº¿ç¼–è¯‘å’Œè™šæ‹Ÿæœºæµ‹è¯•è¿è¡Œ

2. ethereum P2P:
	- æ¯ä¸ªå®¢æˆ·ç«¯éƒ½ä¼šæœ‰3ä¸ªç¡¬ç¼–ç çš„bootnodes
	- ä¹‹é—´çš„å‘çŽ°å’Œå¯¹ç­‰å¹¿æ’­åŸºäºŽRLPxçš„ Kademlia DHT
	- èŠ‚ç‚¹ä¼šæœ‰ä¸€ä¸ªnodeID: å”¯ä¸€æ ‡ç¤º
	- 
3. æœ€æ–°whisperä¾‹å­:
	- status: https://github.com/status-im/status-go/blob/3d7f4a3a9653b45a1b66390c727ceec9f79ed924/static/tests/whisper.js
	- https://gist.github.com/rgeraldes/1aa4a4bcdae03d1d79ca02d4ce0fd0b1
	- æœ€æ–°v5-API: https://github.com/ethereum/go-ethereum/wiki/Whisper-v5-RPC-API

4. ä½¿ç”¨curlæµ‹è¯•:
'''
geth --shh --testnet --nodiscover --rpc --rpccorsdomain "http://localhost:3000" --shh console

curl -X POST http://localhost:8545 --data '{"jsonrpc":"2.0","method":"shh_subscribe","params":["messages", {
curl -X POST http://localhost:8545 --data '{"jsonrpc":"2.0","method":"shh_subscribe","params":["messages", {
  topics: ['0x5a4ea131', '0x11223344'],
  symKeyID: 'b874f3bbaf031214a567485b703a025cec27d26b2c4457d6b139e56ad8734cea',
  sig: '0x048229fb947363cf13bb9f9532e124f08840cd6287ecae6b537cda2947ec2b23dbdc3a07bdf7cd2bfb288c25c4d0d0461d91c719da736a22b7bebbcf912298d1e6',
  pow: 12.3(?)
  }],"id":1}'

curl -X POST http://localhost:3000 --data '{"jsonrpc":"2.0","method":"shh_post","params":[{
  pubKey: 'b874f3bbaf031214a567485b703a025cec27d26b2c4457d6b139e56ad8734cea',
  ttl: 7,
  topic: '0x07678231',
  powTarget: 2.01,
  powTime: 2,
  payload: '0x68656c6c6f'
  }],"id":1}'
'''

## ç»¼è¿°-æž¶æž„é˜²å¾¡
0. åˆå§‹åŒ–
	- è®¾å¤‡çš„å‡ºåŽ‚IDå·ç»è¿‡hashä½œä¸ºdevice_ID, ç”¨äºŽä¸Žhubé€šä¿¡çš„å®‰å…¨ä»¤ç‰Œ
		- è®¾å¤‡çš„å”¯ä¸€æ€§æ ‡è¯†æ²¡æœ‰è§„å¾‹, éšæœºçš„
	- æ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªä»¥å¤ªåŠè´¦å·user_ID
	- æ¯ä¸ªhubèŠ‚ç‚¹æœ‰ä¸€ä¸ªhub_ID
		- admin.node_info
	- ç»‘å®š:
		- æ¯ä¸ªç”¨æˆ·ä¸Žå…¶å¯¹åº”çš„hubèŠ‚ç‚¹
		- æ¯ä¸ªhubèŠ‚ç‚¹ä¸Žå…¶å¯¹åº”çš„è®¾å¤‡
		- ç»‘å®šè¿‡ç¨‹ä¸ºåˆå§‹åŒ–è¿‡ç¨‹, éœ€è¦ç”±è¯¥hub_IDçš„ç”¨æˆ·å‘èµ·äº¤æ˜“å®Œæˆæ“ä½œ, æ— æ³•ä¿®æ”¹;
		- è‹¥åŽæœŸéœ€è¦æ·»åŠ , åˆ é™¤, ä¿®æ”¹ç»‘å®šå…³ç³», åŒæ ·éœ€è¦è¯¥hub_IDçš„ç”¨æˆ·æ‰èƒ½å‘èµ·äº¤æ˜“
		- è®¾è®¡è®¿é—®æƒé™:
			- åªæœ‰è¯¥hub_IDçš„ç”¨æˆ·æ‰èƒ½è®¿é—®è¯¥homegroup[]å˜é‡
			- å¯¹device_IDå’Œhub_IDè¿›è¡ŒéšåŒ¿, è®¾ä¸ºprivateå˜é‡
		typedef HomeState struct {
			user_ID,
			hub_ID[],
			device_ID[],
		}
		contract Smarthome {
			HomeState homegroup[];
			init(){
				homegroup[user_ID] = { ... };
			}
		}
	- æŽ§åˆ¶
		- å¨èƒ: å¯éžæ³•æŽ§åˆ¶æœªç»‘å®šçš„è®¾å¤‡
	- æŽˆæƒ	
		- å¨èƒ: 
			- é‡å¤ç»‘å®š, ä¸ç”¨æç¤ºåŽŸç»‘å®šè€…æŽˆæƒ
			- å…·ä½“å®žæ–½: èŽ·å–å¦ä¸€ä¸ªç”¨æˆ·çš„è®¾å¤‡, å¹¶é€šè¿‡è‡ªå·±ç”¨æˆ·çš„smartç™»å½•, é‡æ–°åˆå§‹åŒ–è‡ªå·±çš„åˆçº¦å˜é‡
		- åº”å¯¹:
			- é¦–å…ˆéœ€è¦éžæ³•èŽ·å–ç”¨æˆ·çš„device,ç„¶åŽç”¨è‡ªå·±çš„smartå¯¹è¯¥deviceæ“ä½œ
			- æ™ºèƒ½åˆçº¦çš„å®‰å…¨ç­–ç•¥é™åˆ¶æ¯ä¸ªç”¨æˆ·çš„è®¿é—®æƒé™
			- éœ€è¦é‡æ–°ç”¨å¦ä¸€ä¸ªuser_IDç™»å½•å¹¶å‘èµ·äº¤æ˜“, gas
			- å¢žåŠ é—­çŽ¯çš„æ“ä½œ:
				- æ¯ä¸ªhubä¼šè¯»å–åŒºå—é“¾çš„åˆçº¦çŠ¶æ€å˜é‡
				- è‹¥å‘çŽ°è®¾å¤‡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜, æˆ–è€…å‡†å¤‡æ‰§è¡ŒæœªæŽˆæƒçš„åŠ¨ä½œ, åˆ™å‘ç”¨æˆ·å‘é€è­¦å‘Š.
ä¸šåŠ¡å±‚æŽ¥å…¥åè®®çš„å®‰å…¨å¨èƒ:
	1ï¼‰çªƒå¬æ”»å‡»ï¼š
		- å¨èƒ: 
			- æ”»å‡»è€…é€šè¿‡çªƒå¬ç½‘ç»œé€šä¿¡é“¾è·¯ä¸Šçš„æ•°æ®ï¼ŒèŽ·å–æ™ºèƒ½è®¾å¤‡ç»ˆç«¯çš„éšç§æ•°æ®å’Œæ•æ„Ÿæ•°æ®ã€‚ä¾‹å¦‚ï¼Œé€šè¿‡è¢«åŠ¨çªƒå¬ç½‘ç»œå¯ä»¥èŽ·å–å¥åº·åŒ»ç–—ç±»æ™ºèƒ½ç¡¬ä»¶è®¾å¤‡çš„æ•°æ®ï¼Œä»Žè€ŒèŽ·å¾—ç”¨æˆ·çš„éšç§æ•°æ®ã€‚
			- å…·ä½“å®žæ–½: 
		- åº”å¯¹: 
			- æ•°æ®
	2ï¼‰ç¯¡æ”¹æ”»å‡»ï¼šæ”»å‡»è€…é€šè¿‡ä¸»åŠ¨æ’å…¥åˆ°é€šä¿¡é“¾è·¯ä¸Šï¼Œå¯¹æ•°æ®çš„å®Œæ•´æ€§è¿›è¡Œæ”»å‡»ï¼Œå³ç¯¡æ”¹æ•°æ®æŠ¥æ–‡çš„å†…å®¹ï¼Œä¾‹å¦‚ï¼Œæ”»å‡»è€…å¯ä»¥ç¯¡æ”¹æ™ºèƒ½è®¾å¤‡å‘ä¸šåŠ¡äº‘æäº¤çš„ä¸šåŠ¡æ•°æ®ï¼Œå‘ä¸šåŠ¡äº‘æä¾›é”™è¯¯çš„æ•°æ®ä¿¡æ¯ï¼›
	3ï¼‰ä¼ªé€ æ”»å‡»ï¼šå³ä¸€ç§é’ˆå¯¹çœŸå®žæ€§çš„æ”»å‡»ï¼Œæ”»å‡»è€…ä¼ªé€ ä¸€äº›çœ‹ä¼¼æ¥è‡ªåˆæ³•æ¥æºçš„æ•°æ®æŠ¥æ–‡ï¼Œä»¥æ­¤è¯±éª—é€šä¿¡çš„å¦ä¸€æ–¹ã€‚å°¤å…¶æ˜¯åœ¨æ™ºèƒ½è®¾å¤‡çš„æŽ§åˆ¶æŒ‡ä»¤ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œæ”»å‡»è€…å¯ä»¥ä¼ªé€ ä¸€äº›æºå¸¦æŽ§åˆ¶æŒ‡ä»¤çš„æŠ¥æ–‡å‘ç»™æ™ºèƒ½è®¾å¤‡ï¼Œä»Žè€Œè¾¾åˆ°æœªæŽˆæƒæ“ä½œçš„æ•ˆæžœã€‚
	4ï¼‰é‡æ”¾æ”»å‡»ï¼šä»Žç›®å‰çš„åˆ†æžæ¥çœ‹ï¼Œé‡æ”¾æ”»å‡»ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªæ–¹é¢ï¼Œä¸€ä¸ªæ˜¯é’ˆå¯¹æœªåŠ å¯†çš„é€šä¿¡åè®®é‡æ”¾æŽ§åˆ¶æŒ‡ä»¤æ”»å‡»è®¾å¤‡ï¼Œå¦ä¸€ä¸ªæ˜¯å¯¹ä¼šè¯ä»¤ç‰Œçš„é‡å¤ä½¿ç”¨è€Œå‘èµ·çš„æ”»å‡»è¡Œä¸ºã€‚

1. DDOSé˜²å¾¡:
	1. å¸¦å¤–: ç½‘ç»œä¸­çš„è®¾å¤‡æ˜¯ç‹¬ç«‹äºŽè·¯ç”±å™¨çš„, è·¯ç”±å™¨è´Ÿè´£ä¼ è¾“æ¥è‡ªäº’è”ç½‘çš„æµé‡æ•°æ®, ç„¶åŽå‘é€å…ƒæ•°æ®æ ·æœ¬, å‘è®¾å¤‡æè¿°æµé‡æ•°æ®çš„å†…å®¹;
		- å¦‚æžœç³»ç»Ÿæ£€æµ‹åˆ°äº†å¯ç–‘çš„æ•°æ®åŒ…æˆ–æŽ¢æµ‹åˆ°äº†DDOSæ”»å‡»çš„è‹—å¤´, é‚£ä¹ˆç«‹å³å‘ç”¨æˆ·å‘å‡ºè­¦æŠ¥
		- ç‰¹ç‚¹: 
			- å…è®¸å®‰å…¨äººå‘˜ä¸å½±å“æ•°æ®æµé€šä¿¡çš„æƒ…å†µä¸‹å¯¹æµé‡è¿›è¡Œæ›´åŠ å¤æ‚çš„åˆ†æž, ä½†æ˜¯æ£€æµ‹åˆ°æ”»å‡»å’Œé˜²å¾¡å®žæ–½ä¹‹é—´è¿˜æœ‰å»¶è¿Ÿ
			- è¾ƒæ…¢
	2. å¸¦å†…: ç›´æŽ¥é¢å¯¹æ‰€æœ‰çš„é€šä¿¡æ•°æ®æµ, å¹¶åœ¨å¯¹æµé‡åˆ†æžå¤„ç†çš„è¿‡ç¨‹ä¸­, åˆ¤æ–­é‚£äº›æ•°æ®åŒ…åº”è¯¥ä¸¢å¼ƒ, ç„¶åŽå°†æœ‰æ•ˆçš„æ•°æ®åŒ…å‘é€ç»™ç»ˆç«¯ç”¨æˆ·æˆ–è®¾å¤‡
	3. å†…è”ç³»ç»Ÿ: å¯ä»¥æŸ¥çœ‹ä»ŽæŸä¸ªç½‘ç»œèŠ‚ç‚¹æµå‘å¦å¤–ä¸€ä¸ªç½‘ç»œèŠ‚ç‚¹çš„é€šä¿¡æµé‡, å¹¶ä¸”å¯ä»¥å®žæ—¶è¿‡æ»¤å’Œå¤„ç†è¿™äº›æµé‡.
		- ç›¸å¯¹è€Œè¨€: å¸¦å¤–è®¾å¤‡å‡ ä¹Žæ— æ³•èŽ·å–é€šä¿¡æµé‡çš„æ ·æœ¬, è€Œä¸”æ•°æ®æ—©å°±åˆ°è¾¾ç›®çš„åœ°å€.
		- ç‰¹ç‚¹: 
			- 
	4. å…¶ä»–:
		- å†…å®¹åˆ†å¸ƒç½‘ç»œ(CDN)å’Œæµé‡è¿‡æ»¤åŠŸèƒ½ï¼Œä»–ä»¬ä¼šå¯¹ç½‘ç»œé€šä¿¡æµé‡è¿›è¡Œè¿‡æ»¤ï¼Œå¹¶ä¸”å°†æœ€ç»ˆçš„æ•°æ®å‘é€ç»™ä½ 
	5. IoTPOT:
		- ç”¨æˆ·IoTè®¾å¤‡çš„èœœç½: æ¨¡æ‹Ÿå„ç§IOTè®¾å¤‡çš„ç‰¹ç‚¹æ¬ºéª—æ”»å‡»è€…


## hyperledger

1. docker
	- docker --version # 17.03.0-ce or greater
	- docker-compose --version # 1.8 or greater
	- åˆ é™¤imagesï¼šdocker rmi -f imagesid
2. go
	- go version: 1.7.x 
3. nodejs
	- sudo apt install nodejs
	- nodejs -v # æ‰æ˜¯4.2.6
	- æ›´æ–°nodejs
		* sudo npm install -g n 
		* sudo n stable ; æ›´æ–°åˆ°7.6.0
		* sudo n 7.6.0 ; åˆ‡æ¢åˆ°7.6.0
		* node -v ; æ˜¾ç¤º7.6.0
	- node -v: 6.9.x or greater
4. npmï¼š
	- sudo npm install npm@3.10.10 -g
	- npm -v	
5. fabricæºç ï¼š
	- go get github.com/hyperledger/fabric 
	- git checkout -b v1.0.0 # åˆ‡æ¢åˆ°1.0.0ç‰ˆæœ¬
	- åŽæ¥åˆæ”¹ä¸ºgit checkout -b v1.1.0-preview
6. fabricé•œåƒï¼š
	- æµ‹è¯•fabricé›†ç¾¤æ–¹æ¡ˆï¼Œæœ€ç®€å•æµ‹è¯•ï¼š./fabric/examples/e2e_cli/download-dockerimages.sh
	- æœ€å¥½ä½¿ç”¨ç‰¹å®šæ–¹æ¡ˆä¸‹è½½é•œåƒï¼š
hyperledger/fabric-tools
hyperledger/fabric-orderer
hyperledger/fabric-peer
hyperledger/fabric-couchdb
hyperledger/fabric-kafka
hyperledger/fabric-ca
hyperledger/fabric-ccenv
hyperledger/fabric-baseimage
fabric-baseosï¼šfabric-baseosï¼šx86_64-v0.3.1
fabric-membersrvc ï¼š membersrvc
fabric-javaenvï¼š
fabric-zookeeperï¼šfabric-zookeeper:x86_64-1.0.0
	- docker pull hyperledger/fabric-tools:x86_64-1.0.0
	- docker tag 0403fd1c72c7 docker.io/hyperledger/fabric-tools:latest
	- åˆ é™¤ï¼šdocker rmi 0403fd1c72c7
7. å•æœºexampleæµ‹è¯•ï¼š
	- fabric-samples: git clone fabric-samples
		+ cd fabric-samples ; ä¸‹è½½binæ–‡ä»¶åˆ°fabric-samples
		+ binæ–‡ä»¶ä¸‹è½½é€Ÿåº¦å¾ˆæ…¢ï¼Œéœ€è¦ç¦»çº¿ä¸‹è½½ï¼ŒæŸ¥çœ‹/hyperledger/fabric/scripts/bootstrap-1.0.0.shçš„æ–‡ä»¶
		- åˆå§‹åŒ–ç½‘ç»œï¼š./byfn.sh -m generate
		- å¯åŠ¨ç½‘ç»œï¼š./byfn.sh -m up
	- e2e_cliæµ‹è¯•ï¼šæœ¬æœºè¿è¡Œ4+1ä¸ªfabricç½‘ç»œ
		+ cd example/e2e_cli
		+ . download...sh -c x86_64-1.1.0-preview -f x86_64-1.1.0-preview
		+ . network_setup.sh up
		+ . network_setup.sh down
		+ 
	- example02å¯ä»¥çœ‹åˆ°æ¯ä¸€æ­¥çš„æ“ä½œ
8. å¤šæœºæµ‹è¯•ï¼š
	- ç”Ÿæˆå…¬ç§é’¥ã€è¯ä¹¦ã€åˆ›ä¸–åŒºå—ç­‰
		+ serverä¸Žserverä¹‹é—´å®‰å…¨é€šä¿¡
		+ åˆ›å»ºchannelå°±éœ€è¦åˆ›ä¸–åŒºå—ï¼š
			- examples/e2e_cli/generateArtifacts.sh mychannel
			- åœ¨ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹çš„è¯¥ç›®å½•ä¸‹è¿è¡Œæ­¤å‘½ä»¤å³å¯ï¼Œå°†ä¼šç”Ÿæˆä¸¤ä¸ªç›®å½•ï¼š
				+ channel-artifacts
				+ crypto-config
	- é…ç½®å¤šæœåŠ¡å™¨ï¼š
		+ åœ¨ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹è¿è¡Œï¼šgenerateArtifacts.sh mychannel
		+ æŠŠç”Ÿæˆçš„ä¸¤ä¸ªç›®å½•å¤åˆ¶åˆ°å…¶ä»–æœåŠ¡å™¨ç›¸åŒçš„e2e_cliç›®å½•ä¸‹
	- é…ç½®docker-composeæ–‡ä»¶ï¼š
		+ cp docker-compose-cli.yaml docker-compose-peer.yaml
		+ ä¿®æ”¹docker-compose-peer.yamlï¼ŒåŽ»æŽ‰ordererçš„é…ç½®ï¼Œåªä¿ç•™ä¸€ä¸ªpeerå’Œcli
		+ ä¿®æ”¹å®¹å™¨çš„hostæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯extra_hostsè®¾ç½®ï¼Œåå­—è‡ªå·±å‘½åï¼š
			- peerä¸‹é¢ï¼š"orderer.example.com:192.168.17.1"
			- cliä¸‹é¢ï¼š"orderer.example.com:192.168.17.1"
				+ "peer1.org1.example.com:192.168.17.2"
			- æ¯ä¸ªpeerä¼šæœ‰ä¸€ä¸ªå¯¹åº”çš„å®¢æˆ·ç«¯ï¼Œå°±æ˜¯cli
		+ ä¿®æ”¹ç«¯å£æ˜ å°„ï¼š
			* å•æœºæ¨¡å¼ä¸‹ï¼Œ4ä¸ªpeerä¼šæ˜ å°„ä¸»æœºä¸åŒçš„ç«¯å£ï¼Œä½†æ˜¯å¤šæœºéƒ¨ç½²çš„æ—¶å€™ä¸éœ€è¦æ˜ å°„ä¸åŒçš„ç«¯å£ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹base/docker-compose-base.yamlæ–‡ä»¶ï¼športsï¼š7051:7051
	- orderèŠ‚ç‚¹çš„docker-composeæ–‡ä»¶ï¼š


## è·¯ç”±å™¨ç³»ç»Ÿ
1. å®‰è£…openwrt
2. openwrtç½‘ç»œé…ç½®
3. openwrtå®‰è£…docker
	- dockerå®‰è£…æ¡ä»¶ï¼š
		+ dockerç›®å‰åªæ”¯æŒ64ä½CPUæž¶æž„çš„è®¡ç®—æœºä¸Šè¿è¡Œï¼Œx86_64ã€amd64
		+ linux3.8 æˆ– æ›´é«˜ç‰ˆæœ¬çš„å†…æ ¸ï¼Œ3.8ä¹‹å‰çš„ä¹Ÿå¯ä»¥ï¼Œåªæ˜¯æ•ˆæžœä¸åŒ
		+ å†…æ ¸å¿…é¡»æ”¯æŒä¸€äº›åˆé€‚çš„å­˜å‚¨é©±åŠ¨ï¼š
			* Device Manage
			* AUFS
			* vfs
			* btrfs
			* é»˜è®¤å­˜å‚¨é©±åŠ¨é€šå¸¸æ˜¯device
		+ å†…æ ¸å¿…é¡»æ”¯æŒå¹¶å¼€å¯cgroupå’Œå‘½åç©ºé—´namesapceåŠŸèƒ½
4. è·¯ç”±


## hyperledger + composeré…ç½®å¤šèŠ‚ç‚¹
1. è™šæ‹Ÿæœºï¼š
2. 
